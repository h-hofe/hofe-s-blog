<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>设计模式 | Hofe's blog</title><meta name="description" content="设计模式"><meta name="keywords" content="设计模式"><meta name="author" content="hofe"><meta name="copyright" content="hofe"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="http://ta.qq.com"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="baidu-site-verification" content="JoP76yOkd4"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="设计模式"><meta name="twitter:description" content="设计模式"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/hhf443/blog-graph/img/20200502153305.png"><meta property="og:type" content="article"><meta property="og:title" content="设计模式"><meta property="og:url" content="http://hofe.work/2020/05/07/Java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><meta property="og:site_name" content="Hofe's blog"><meta property="og:description" content="设计模式"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/hhf443/blog-graph/img/20200502153305.png"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = 'false'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="canonical" href="http://hofe.work/2020/05/07/Java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><link rel="prev" title="TCP与UDP详解" href="http://hofe.work/2020/05/08/%E7%BD%91%E7%BB%9C/TCP%E4%B8%8EUDP/"><link rel="next" title="通过面试题学MySQL" href="http://hofe.work/2020/05/07/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4/%E7%A7%92%E6%9D%80%E6%9E%B6%E6%9E%84%E7%9A%84%E8%AE%BE%E8%AE%A1/"><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-4088686103083456',
  enable_page_level_ads: 'true'
});</script><script src="https://tajs.qq.com/stats?sId=66539762" charset="UTF-8"></script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"http://hofe.work","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: false,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: true,
  fancybox: true,
  Snackbar: {"bookmark":{"message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.0"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">28</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">28</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">26</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-clock-o"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-comments-o"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/album/"><i class="fa-fw fa fa-camera"></i><span> 相册</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-info-circle"></i><span> 关于</span></a></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、设计模式划分"><span class="toc-text">一、设计模式划分</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、创建型模式"><span class="toc-text">二、创建型模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-单例模式"><span class="toc-text">2.1 单例模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-1-实现原理"><span class="toc-text">2.1.1 实现原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-2-懒汉式-线程不安全"><span class="toc-text">2.1.2 懒汉式-线程不安全</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-3-懒汉式-线程安全"><span class="toc-text">2.1.3 懒汉式-线程安全</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-4-饿汉式-线程安全"><span class="toc-text">2.1.4 饿汉式-线程安全</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-5-双重校验锁-线程安全"><span class="toc-text">2.1.5 双重校验锁-线程安全</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-6-静态内部类-安全-延迟加载"><span class="toc-text">2.1.6 静态内部类-安全-延迟加载</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-简单工厂"><span class="toc-text">2.2 简单工厂</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-工厂方法"><span class="toc-text">2.3 工厂方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-抽象工厂"><span class="toc-text">2.4 抽象工厂</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-建造者模式"><span class="toc-text">2.5 建造者模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-原型模式"><span class="toc-text">2.6 原型模式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、结构型模式"><span class="toc-text">三、结构型模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-适配器模式"><span class="toc-text">3.1 适配器模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-组合模式"><span class="toc-text">3.2 组合模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-装饰模式"><span class="toc-text">3.3 装饰模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-1-实现原理"><span class="toc-text">3.3.1 实现原理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-代理模式"><span class="toc-text">3.4 代理模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-1-实现原理"><span class="toc-text">3.4.1 实现原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-2-静态代理"><span class="toc-text">3.4.2 静态代理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-2-动态代理"><span class="toc-text">3.4.2 动态代理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-3-Cglib代理"><span class="toc-text">3.4.3 Cglib代理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-亨元模式"><span class="toc-text">3.5 亨元模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-外观模式"><span class="toc-text">3.6 外观模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7-桥接模式"><span class="toc-text">3.7 桥接模式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四、行为型模式"><span class="toc-text">四、行为型模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-模板模式"><span class="toc-text">4.1 模板模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-解释器模式"><span class="toc-text">4.2 解释器模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-策略模式"><span class="toc-text">4.3 策略模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-状态模式"><span class="toc-text">4.4 状态模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-观察者模式"><span class="toc-text">4.5 观察者模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-备忘录模式"><span class="toc-text">4.6 备忘录模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-7-中介者模式"><span class="toc-text">4.7 中介者模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-8-命令模式"><span class="toc-text">4.8 命令模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-9-访问者模式"><span class="toc-text">4.9 访问者模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-10-责任链模式"><span class="toc-text">4.10 责任链模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-10-1-实现原理"><span class="toc-text">4.10.1 实现原理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-11-迭代器模式"><span class="toc-text">4.11 迭代器模式</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(https://cdn.jsdelivr.net/gh/hhf443/blog-graph/img/20200502153305.png)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Hofe's blog</a></span><span class="pull_right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-clock-o"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-comments-o"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/album/"><i class="fa-fw fa fa-camera"></i><span> 相册</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-info-circle"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">设计模式</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-05-07 14:59:27"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-05-07</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-05-08 18:14:19"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-05-08</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Java/">Java</a><i class="fa fa-angle-right post-meta__separator" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="post-meta__icon fa fa-file-word-o" aria-hidden="true"></i><span>字数总计:</span><span class="word-count">3.7k</span><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-clock-o" aria-hidden="true"></i><span>阅读时长: 13 分钟</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-comment-o" aria-hidden="true"></i><span>评论数:</span><a href="/2020/05/07/Java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2020/05/07/Java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" itemprop="commentCount"></span></a></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div id="article-container"><blockquote>
<p>只完成了单例、代理、装饰三种，其余待完善</p>
</blockquote>
<h2 id="一、设计模式划分"><a href="#一、设计模式划分" class="headerlink" title="一、设计模式划分"></a>一、设计模式划分</h2><p><img src="/" class="lazyload" data-src="https://images2017.cnblogs.com/blog/401339/201709/401339-20170928225241215-295252070.png"  alt=""></p>
<p>创建型模式：对象实例化的模式，创建型模式用于解耦对象的实例化过程。</p>
<p>结构型模式：把类或对象结合在一起形成一个更大的结构。</p>
<p>行为型模式：类和对象如何交互，及划分责任和算法。</p>
<h2 id="二、创建型模式"><a href="#二、创建型模式" class="headerlink" title="二、创建型模式"></a>二、创建型模式</h2><h3 id="2-1-单例模式"><a href="#2-1-单例模式" class="headerlink" title="2.1 单例模式"></a>2.1 单例模式</h3><blockquote>
<p>某个类只能有一个实例，提供一个全局的访问点。</p>
</blockquote>
<h4 id="2-1-1-实现原理"><a href="#2-1-1-实现原理" class="headerlink" title="2.1.1 实现原理"></a>2.1.1 实现原理</h4><p>使用一个私有构造函数、一个私有静态变量以及一个公有静态函数来实现。</p>
<p>私有构造函数保证了不能通过构造函数来创建对象实例，只能通过公有静态函数返回唯一的私有静态变量。</p>
<p><strong>使用场景</strong></p>
<p>● 要求生成唯一序列号的环境；</p>
<p>● 在整个项目中需要一个共享访问点或共享数据，例如一个Web页面上的计数器，可以不用把每次刷新都记录到数据库中，使用单例模式保持计数器的值，并确保是线程安全的；</p>
<p>● 创建一个对象需要消耗的资源过多，如要访问IO和数据库等资源；</p>
<p>● 需要定义大量的静态常量和静态方法（如工具类）的环境，可以采用单例模式（当然，也可以直接声明为static的方式）。</p>
<h4 id="2-1-2-懒汉式-线程不安全"><a href="#2-1-2-懒汉式-线程不安全" class="headerlink" title="2.1.2 懒汉式-线程不安全"></a>2.1.2 懒汉式-线程不安全</h4><p>只要实例还未被初始化，则new Singleton()</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton uniqueInstance;	<span class="comment">// 私有静态变量</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;	<span class="comment">// 私有构造函数</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getUniqueInstance</span><span class="params">()</span> </span>&#123;	<span class="comment">// 公有静态函数</span></span><br><span class="line">        <span class="keyword">if</span> (uniqueInstance == <span class="keyword">null</span>) &#123;</span><br><span class="line">            uniqueInstance = <span class="keyword">new</span> Singleton();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> uniqueInstance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是这种方式在多线程下是不安全的，多个线程能够同时进入 <code>if (uniqueInstance == null)</code> ，并且此时 uniqueInstance 为 null，那么会有多个线程执行 <code>uniqueInstance = new Singleton();</code> 语句，这将导致实例化多次 uniqueInstance。</p>
<h4 id="2-1-3-懒汉式-线程安全"><a href="#2-1-3-懒汉式-线程安全" class="headerlink" title="2.1.3 懒汉式-线程安全"></a>2.1.3 懒汉式-线程安全</h4><p>只需要对 getUniqueInstance() 方法<strong>加锁</strong>，那么在一个时间点只能有一个线程能够进入该方法，从而避免了实例化多次 uniqueInstance。</p>
<p>但是当一个线程进入该方法之后，其它试图进入该方法的线程都必须等待，即使 uniqueInstance 已经被实例化了。这会让线程阻塞时间过长，因此该方法有性能问题，不推荐使用。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">	<span class="comment">// 私有静态变量</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton uniqueInstance;	</span><br><span class="line">	</span><br><span class="line">    <span class="comment">// 私有构造函数</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;	</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">// 公有静态函数</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> Singleton <span class="title">getUniqueInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    	<span class="keyword">if</span> (uniqueInstance == <span class="keyword">null</span>) &#123;</span><br><span class="line">        	uniqueInstance = <span class="keyword">new</span> Singleton();</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="keyword">return</span> uniqueInstance;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-1-4-饿汉式-线程安全"><a href="#2-1-4-饿汉式-线程安全" class="headerlink" title="2.1.4 饿汉式-线程安全"></a>2.1.4 饿汉式-线程安全</h4><p>该模式的特点是类一旦加载就创建一个单例，保证在调用 getInstance 方法之前单例已经存在了。这样多线程也就创建多个实例了</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton uniqueInstance = <span class="keyword">new</span> Singleton();	<span class="comment">// 私有静态变量</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;	<span class="comment">// 私有构造函数</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getUniqueInstance</span><span class="params">()</span> </span>&#123;	<span class="comment">// 公有静态函数</span></span><br><span class="line">        <span class="keyword">return</span> uniqueInstance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>直接实例化的方式也丢失了延迟实例化带来的节约资源的好处。</p>
<h4 id="2-1-5-双重校验锁-线程安全"><a href="#2-1-5-双重校验锁-线程安全" class="headerlink" title="2.1.5 双重校验锁-线程安全"></a>2.1.5 双重校验锁-线程安全</h4><p>只有当 uniqueInstance 没有被实例化时，才需要进行加<code>synchronize</code>锁，不对整个方法加锁。但这时候多个线程都可以进入该方法了，就可能获取到还没初始化的实例，所以同加<code>volatile</code>，防止指令重排序。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> Singleton uniqueInstance;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getUniqueInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (uniqueInstance == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// 多个进程可进入，依次加锁new 对象</span></span><br><span class="line">            <span class="keyword">synchronized</span> (Singleton<span class="class">.<span class="keyword">class</span>) </span>&#123;</span><br><span class="line">                <span class="comment">// 第二重校验，防止第二个线程再new 一次</span></span><br><span class="line">                <span class="keyword">if</span> (uniqueInstance == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    uniqueInstance = <span class="keyword">new</span> Singleton();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> uniqueInstance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-1-6-静态内部类-安全-延迟加载"><a href="#2-1-6-静态内部类-安全-延迟加载" class="headerlink" title="2.1.6 静态内部类-安全-延迟加载"></a>2.1.6 静态内部类-安全-延迟加载</h4><p>当 Singleton 类被加载时，静态内部类 SingletonHolder 没有被加载进内存。只有当调用 <code>getUniqueInstance()</code> 方法从而触发 <code>SingletonHolder.INSTANCE</code> 时 SingletonHolder 才会被加载，此时初始化 INSTANCE 实例，并且 JVM 能确保 INSTANCE 只被实例化一次。</p>
<p>这种方式不仅具有延迟初始化的好处，而且由 JVM 提供了对线程安全的支持。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 静态内部类</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonHolder</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton INSTANCE = <span class="keyword">new</span> Singleton();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getUniqueInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> SingletonHolder.INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







<h3 id="2-2-简单工厂"><a href="#2-2-简单工厂" class="headerlink" title="2.2 简单工厂"></a>2.2 简单工厂</h3><p>一个工厂类根据传入的参量决定创建出那一种产品类的实例。</p>
<h3 id="2-3-工厂方法"><a href="#2-3-工厂方法" class="headerlink" title="2.3 工厂方法"></a>2.3 工厂方法</h3><p>定义一个创建对象的接口，让子类决定实例化那个类。</p>
<h3 id="2-4-抽象工厂"><a href="#2-4-抽象工厂" class="headerlink" title="2.4 抽象工厂"></a>2.4 抽象工厂</h3><p>创建相关或依赖对象的家族，而无需明确指定具体类。</p>
<h3 id="2-5-建造者模式"><a href="#2-5-建造者模式" class="headerlink" title="2.5 建造者模式"></a>2.5 建造者模式</h3><p>封装一个复杂对象的构建过程，并可以按步骤构造。</p>
<h3 id="2-6-原型模式"><a href="#2-6-原型模式" class="headerlink" title="2.6 原型模式"></a>2.6 原型模式</h3><p>通过复制现有的实例来创建新的实例。</p>
<h2 id="三、结构型模式"><a href="#三、结构型模式" class="headerlink" title="三、结构型模式"></a>三、结构型模式</h2><h3 id="3-1-适配器模式"><a href="#3-1-适配器模式" class="headerlink" title="3.1 适配器模式"></a>3.1 适配器模式</h3><p>将一个类的方法接口转换成客户希望的另外一个接口。</p>
<h3 id="3-2-组合模式"><a href="#3-2-组合模式" class="headerlink" title="3.2 组合模式"></a>3.2 组合模式</h3><p>将对象组合成树形结构以表示“”部分-整体“”的层次结构。</p>
<h3 id="3-3-装饰模式"><a href="#3-3-装饰模式" class="headerlink" title="3.3 装饰模式"></a>3.3 装饰模式</h3><blockquote>
<p>动态的给对象添加新的功能。</p>
</blockquote>
<h4 id="3-3-1-实现原理"><a href="#3-3-1-实现原理" class="headerlink" title="3.3.1 实现原理"></a>3.3.1 实现原理</h4><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/hhf443/blog-graph/img/20200507161016.png"  alt=""></p>
<ul>
<li><p>Component<code>抽象构件</code>：Component是一个接口或者是抽象类，就是定义我们最核心的对象，也就是最原始的对象</p>
<p>注意：在装饰模式中，必然有一个最基本、最核心、最原始的接口或抽象类充当Component抽象构件。</p>
</li>
<li><p>ConcreteComponent <code>具体构件</code></p>
<p>ConcreteComponent是最核心、最原始、最基本的接口或抽象类的实现，你要装饰的就是它。</p>
</li>
<li><p>Decorator<code>装饰角色</code></p>
<p>一般是一个抽象类，做什么用呢？实现接口或者抽象方法，它里面可不一定有抽象的方法呀，在它的属性里必然有一个private变量指向Component抽象构件。</p>
</li>
<li><p>具体装饰角色</p>
<p>ConcreteDecoratorA和ConcreteDecoratorB是两个具体的装饰类，你要把你最核心的、最原始的、最基本的东西装饰成其他东西。</p>
</li>
</ul>
<p><strong>使用场景</strong></p>
<ul>
<li><p>需要扩展一个类的功能，或给一个类增加附加功能。</p>
</li>
<li><p>需要动态地给一个对象增加功能，这些功能可以再动态地撤销。</p>
</li>
<li><p>需要为一批的兄弟类进行改装或加装功能，当然是首选装饰模式。</p>
</li>
<li><p>当不能通过生成子类的方法进行扩充时 </p>
</li>
</ul>
<p><strong>优点</strong></p>
<ul>
<li><p>无需通过继承增加子类就能扩展新功能。</p>
</li>
<li><p>使用关联关系比继承更加灵活，可以用添加和分离的方式，用装饰在运行时 增加和删除职责</p>
</li>
<li><p>避免在层次结构高的类有太多特征，用装饰器为其逐渐地添加功能 </p>
</li>
</ul>
<h3 id="3-4-代理模式"><a href="#3-4-代理模式" class="headerlink" title="3.4 代理模式"></a>3.4 代理模式</h3><blockquote>
<p>代理模式给某一个对象提供一个代理对象，并由代理对象控制对原对象的引用。</p>
</blockquote>
<p>代理有以下三类：</p>
<ul>
<li>静态代理：被代理对象与代理对象需要一起实现相同的接口或者是继承相同父类，因此要定义一个接口或抽象类。可以做到在<strong>不修改目标对象的功能前提下，对目标功能扩展</strong>；但因为代理对象需要与目标对象实现一样的接口，所以会有很多代理类，类太多，同时，<strong>一旦接口增加方法，目标对象与代理对象都要维护</strong>。</li>
<li>动态代理：解决静态代理需要维护对象的问题。在程序运行时JVM才为被代理对象生成代理对象。常说的动态代理也叫做JDK代理也是一种接口代理，JDK中生成代理对象的代理类就是Proxy，所在包是java.lang.reflect。<strong>代理对象不需要实现接口，但是目标对象一定要实现接口，否则不能使用动态代理</strong>，因此这也算是这种方式的缺陷。</li>
<li>cglib代理：弥补静态代理和动态代理的目标对象都要实现接口的不足。<strong>并不是任何对象都会实现一个接口</strong>，也存在没有实现任何的接口的对象，这时就可以使用继承目标类以目标对象子类的方式实现代理,这种方法就叫做:Cglib代理，也叫作子类代理，它是在<strong>内存中构建一个子类对象从而实现对目标对象功能的扩展</strong>。</li>
</ul>
<h4 id="3-4-1-实现原理"><a href="#3-4-1-实现原理" class="headerlink" title="3.4.1 实现原理"></a>3.4.1 实现原理</h4><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/hhf443/blog-graph/img/20200507191737.jpg"  alt=""></p>
<p>记住以下关键点，简单易实现：</p>
<ul>
<li><p>代理类与委托类实现同一接口</p>
</li>
<li><p>在委托类中实现功能，在代理类的方法中中引用委托类的同名方法</p>
</li>
<li><p>外部类调用委托类某个方法时，直接以接口指向代理类的实例，这正是代理的意义所在：屏蔽。</p>
</li>
</ul>
<p><strong>使用场景</strong></p>
<ul>
<li><p>当我们想要隐藏某个类时，可以为其提供代理类</p>
</li>
<li><p>当一个类需要对不同的调用者提供不同的调用权限时，可以使用代理类来实现（代理类不一定只有一个，我们可以建立多个代理类来实现，也可以在一个代理类中金进行权限判断来进行不同权限的功能调用）</p>
</li>
</ul>
<ul>
<li>当我们要扩展某个类的某个功能时，可以使用代理模式，在代理类中进行简单扩展（只针对简单扩展，可在引用委托类的语句之前与之后进行）</li>
</ul>
<h4 id="3-4-2-静态代理"><a href="#3-4-2-静态代理" class="headerlink" title="3.4.2 静态代理"></a>3.4.2 静态代理</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 接口</span></span><br><span class="line">    <span class="class"><span class="keyword">interface</span> <span class="title">IStar</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">sing</span><span class="params">()</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 真实对象</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">LDHStar</span> <span class="keyword">implements</span> <span class="title">IStar</span> </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sing</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"刘德华唱歌"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 代理类需要有真实对象的控制权 (引用)</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">ProxyManger</span> <span class="keyword">implements</span> <span class="title">IStar</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 真实对象的引用</span></span><br><span class="line">        <span class="keyword">private</span> IStar star;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">ProxyManger</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">super</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">ProxyManger</span><span class="params">(IStar star)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">super</span>();</span><br><span class="line">            <span class="keyword">this</span>.star = star;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sing</span><span class="params">()</span> </span>&#123;</span><br><span class="line">　　　　　　System.out.println(<span class="string">"唱歌前准备"</span>);</span><br><span class="line">    　　　 star.sing();</span><br><span class="line">   　　　　System.out.println(<span class="string">"善后工作"</span>);        &#125;</span><br><span class="line">    	&#125;</span><br><span class="line">        <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">            <span class="comment">// 创建明星对象</span></span><br><span class="line">            IStar ldh = <span class="keyword">new</span> LDHStar();</span><br><span class="line">            ProxyManger proxy = <span class="keyword">new</span> ProxyManger(ldh);</span><br><span class="line">            proxy.sing();</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="3-4-2-动态代理"><a href="#3-4-2-动态代理" class="headerlink" title="3.4.2 动态代理"></a>3.4.2 动态代理</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//目标类接口</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IDog</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//目标类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GunDog</span> <span class="keyword">implements</span> <span class="title">IDog</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"猎狗在跑"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DogUtils</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"增强方式一"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">method2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"增强方式二"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyInvocationHandle</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Object target;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTarget</span><span class="params">(Object target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.target = target;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">            DogUtils.method1();</span><br><span class="line">            method.invoke(target, args);</span><br><span class="line">            DogUtils.method2();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="comment">//生产代理对象的工厂</span></span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">MyProxyFactory</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">getProxy</span><span class="params">(Object target)</span> </span>&#123;</span><br><span class="line">        MyInvocationHandle handle = <span class="keyword">new</span> MyInvocationHandle();</span><br><span class="line">        handle.setTarget(target);</span><br><span class="line">        Object proxy = Proxy.newProxyInstance(target.getClass().getClassLoader(), target.getClass().getInterfaces(), handle);</span><br><span class="line">        <span class="keyword">return</span> proxy;</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">      IDog dog = <span class="keyword">new</span> GunDog();</span><br><span class="line">      IDog proxy =(IDog) MyProxyFactory.getProxy(dog);</span><br><span class="line">      proxy.run();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-4-3-Cglib代理"><a href="#3-4-3-Cglib代理" class="headerlink" title="3.4.3 Cglib代理"></a>3.4.3 Cglib代理</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CglibProxy</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">100000</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            arr[i] = (<span class="keyword">int</span>) (Math.random() * <span class="number">1000</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//实例化一个增强器，也就是cglib中的一个class generator</span></span><br><span class="line">        Enhancer enhancer = <span class="keyword">new</span> Enhancer();</span><br><span class="line">        <span class="comment">//设置目标类</span></span><br><span class="line">        enhancer.setSuperclass(ArraySort2<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="comment">//设置拦截对象，这里直接使用匿名内部类写法</span></span><br><span class="line">        enhancer.setCallback(<span class="keyword">new</span> MethodInterceptor() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Object <span class="title">intercept</span><span class="params">(Object object , Method method, Object[] args, MethodProxy proxy)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">                String sortName = method.getName();</span><br><span class="line">                <span class="keyword">switch</span> (sortName) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">"bubbleSort"</span>:</span><br><span class="line">                    sortName = <span class="string">"冒泡排序"</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">"selectSort"</span>:</span><br><span class="line">                    sortName = <span class="string">"选择排序"</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">"quickSort"</span>:</span><br><span class="line">                    sortName = <span class="string">"快速排序"</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line">                <span class="comment">//此处一定要使用proxy的invokeSuper方法来调用目标类的方法</span></span><br><span class="line">                proxy.invokeSuper(object, args);</span><br><span class="line">                <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">                System.out.println(<span class="string">"本次"</span> + sortName + <span class="string">"的执行时间为: "</span> + (end -start) + <span class="string">"ms"</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//生成代理类并返回一个实例</span></span><br><span class="line">        ArraySort2 arraySort = (ArraySort2) enhancer.create();</span><br><span class="line">        arraySort.bubbleSort(arr);</span><br><span class="line">        arraySort.selectSort(arr);</span><br><span class="line">        arraySort.quickSort(arr);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArraySort2</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">quickSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">        Arrays.sort(arr);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">selectSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i+<span class="number">1</span>; j &lt; arr.length; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (arr[i] &gt; arr[j]) &#123;</span><br><span class="line">                    <span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line">                    temp = arr[i];</span><br><span class="line">                    arr[i] = arr[j];</span><br><span class="line">                    arr[j] = temp;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bubbleSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; arr.length - <span class="number">1</span> - i; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>]) &#123;</span><br><span class="line">                    <span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line">                    temp = arr[j];</span><br><span class="line">                    arr[j] = arr[j + <span class="number">1</span>];</span><br><span class="line">                    arr[j + <span class="number">1</span>] = temp;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>









<h3 id="3-5-亨元模式"><a href="#3-5-亨元模式" class="headerlink" title="3.5 亨元模式"></a>3.5 亨元模式</h3><p>通过共享技术来有效的支持大量细粒度的对象。</p>
<h3 id="3-6-外观模式"><a href="#3-6-外观模式" class="headerlink" title="3.6 外观模式"></a>3.6 外观模式</h3><p>对外提供一个统一的方法，来访问子系统中的一群接口。</p>
<h3 id="3-7-桥接模式"><a href="#3-7-桥接模式" class="headerlink" title="3.7 桥接模式"></a>3.7 桥接模式</h3><p>将抽象部分和它的实现部分分离，使它们都可以独立的变化。</p>
<h2 id="四、行为型模式"><a href="#四、行为型模式" class="headerlink" title="四、行为型模式"></a>四、行为型模式</h2><h3 id="4-1-模板模式"><a href="#4-1-模板模式" class="headerlink" title="4.1 模板模式"></a>4.1 模板模式</h3><p>定义一个算法结构，而将一些步骤延迟到子类实现。</p>
<h3 id="4-2-解释器模式"><a href="#4-2-解释器模式" class="headerlink" title="4.2 解释器模式"></a>4.2 解释器模式</h3><p>给定一个语言，定义它的文法的一种表示，并定义一个解释器。</p>
<h3 id="4-3-策略模式"><a href="#4-3-策略模式" class="headerlink" title="4.3 策略模式"></a>4.3 策略模式</h3><p>定义一系列算法，把他们封装起来，并且使它们可以相互替换。</p>
<h3 id="4-4-状态模式"><a href="#4-4-状态模式" class="headerlink" title="4.4 状态模式"></a>4.4 状态模式</h3><p>允许一个对象在其对象内部状态改变时改变它的行为。</p>
<h3 id="4-5-观察者模式"><a href="#4-5-观察者模式" class="headerlink" title="4.5 观察者模式"></a>4.5 观察者模式</h3><p>对象间的一对多的依赖关系。</p>
<h3 id="4-6-备忘录模式"><a href="#4-6-备忘录模式" class="headerlink" title="4.6 备忘录模式"></a>4.6 备忘录模式</h3><p>在不破坏封装的前提下，保持对象的内部状态。</p>
<h3 id="4-7-中介者模式"><a href="#4-7-中介者模式" class="headerlink" title="4.7 中介者模式"></a>4.7 中介者模式</h3><p>用一个中介对象来封装一系列的对象交互。</p>
<h3 id="4-8-命令模式"><a href="#4-8-命令模式" class="headerlink" title="4.8 命令模式"></a>4.8 命令模式</h3><p>将命令请求封装为一个对象，使得可以用不同的请求来进行参数化。</p>
<h3 id="4-9-访问者模式"><a href="#4-9-访问者模式" class="headerlink" title="4.9 访问者模式"></a>4.9 访问者模式</h3><p>在不改变数据结构的前提下，增加作用于一组对象元素的新功能。</p>
<h3 id="4-10-责任链模式"><a href="#4-10-责任链模式" class="headerlink" title="4.10 责任链模式"></a>4.10 责任链模式</h3><blockquote>
<p>将请求的发送者和接收者解耦，使的多个对象都有处理这个请求的机会。，将 这些处理器对象连成一条链，并沿这条链传递请求，直到有一个处理器对象处理它为止</p>
</blockquote>
<h4 id="4-10-1-实现原理"><a href="#4-10-1-实现原理" class="headerlink" title="4.10.1 实现原理"></a>4.10.1 实现原理</h4><p><strong>适用场景</strong></p>
<p>1）有多个处理器对象可以处理一个请求，<strong>哪个处理器对象处理该请求在运行时动态确定</strong> </p>
<p>2）在不明确指定接收者的情况下，向多个处理器对象中的一个提交请求 </p>
<p>3）可以动态指定一组处理器对象处理请求</p>
<p><strong>优点</strong> </p>
<p>1）降低耦合，使得 请求发送者无需知道是哪个处理器对象处理请求 </p>
<p>2）简化对象的相互连接 </p>
<p>3）增强了给对象指派责任的灵活性 </p>
<p>4）方便添加新的请求处理类 </p>
<h3 id="4-11-迭代器模式"><a href="#4-11-迭代器模式" class="headerlink" title="4.11 迭代器模式"></a>4.11 迭代器模式</h3><p>一种遍历访问聚合对象中各个元素的方法，不暴露该对象的内部结构。</p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">hofe</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://hofe.work/2020/05/07/Java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">http://hofe.work/2020/05/07/Java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://hofe.work" target="_blank">Hofe's blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/hhf443/blog-graph/img/20200508180548.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.jpg" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.jpg" alt="支付宝"/><div class="post-qr-code__desc">支付宝</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/05/08/%E7%BD%91%E7%BB%9C/TCP%E4%B8%8EUDP/"><img class="prev_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/hhf443/blog-graph/img/20200508180548.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">TCP与UDP详解</div></div></a></div><div class="next-post pull_right"><a href="/2020/05/07/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4/%E7%A7%92%E6%9D%80%E6%9E%B6%E6%9E%84%E7%9A%84%E8%AE%BE%E8%AE%A1/"><img class="next_cover lazyload" data-src="/img/post.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">通过面试题学MySQL</div></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify: false,
  verify: false,
  appId: 'b5cpWE77l9G2Um3MSdyvAmh6-gzGzoHsz',
  appKey: 'LCxOgpdF1CrQ1Xb4dnNrg6OH',
  placeholder: '留下你的足迹吧',
  avatar: 'monsterid',
  meta: guest_info,
  pageSize: '10',
  lang: 'en',
  recordIP: true,
  serverURLs: ''
});</script></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 By hofe</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="footer_custom_text">Hi, welcome to my <a href="http://hofe.work/">blog</a>!</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = false;
POWERMODE.shake = true;
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="/js/search/local-search.js"></script></body></html>